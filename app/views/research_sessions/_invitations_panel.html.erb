<table class="table table-hover invitees" id='dynamic-invitation-panel' >
  <tbody>
    <tr>
      <th>Remove</th>
      <th>Name</th>
      <th>Action</th>
      <th>Current State</th>
      <th>Gift Card #</th>
      <th>Add Cards</th>
    </tr>
    <% for invitation in @research_session.invitations.includes(:person) do %>
      <tr>
        <td><%= link_to "X", research_session_remove_person_path(@research_session, invitation.person), remote: true, class: 'btn btn-danger btn-mini' %> </td>
        <td><%= link_to invitation.person.full_name, person_path(invitation.person), id: "person-#{invitation.person.id}" %></td>
        <td>
          <%= render partial: 'invitations/actions', locals: {invitation: invitation} %>
        </td>
        <td><%= invitation.aasm_state %></td>
        <td>
          <%= invitation.gift_cards.size %>
        </td>
        <td>
        <%= link_to "+",
              modal_gift_cards_path(invitation.class.to_s, invitation.id),
                {:remote => true,
                  'data-toggle' =>  "modal",
                  'data-target' => '#modal-window',
                  id: "#{invitation.id}-gift-card-count",
                  class: 'btn btn-mini'} unless invitation.missed? %>
        </td>
      </tr>
    <% end if @research_session.invitations.size > 0 %>
  </tbody>
</table>
<div id="modal-window" class="modal hide" role="dialog" aria-labelledby="GiftCardModal" aria-hidden="true"></div>
