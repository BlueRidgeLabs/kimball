<% @added.each do |add| %>
  $('#<%= @type %>-cart').append("<%= j render partial: "cart/#{@type}_item", locals: {person: Person.find(add)} %>");
  $('.add-to-session').on('click',function(el){
    added_person = {  full_name: $(this).data('fullname'),
                      person_id: $(this).data('personid')};
    $('a.add_fields').click();
    $('input#cart-typeahead').val('');
  })
  $('#<%= add %>-cart-delete').removeClass('d-none').addClass('d-inline');
  $('#<%= add %>-cart-add').removeClass('d-inline').addClass('d-none');
<% end %>

if(typeof research_session_id !== "undefined")
{
  Turbolinks.reload(); // HACK: horrible hack
}

$('.cart-size').html('<%= @cart.people.size %>');
